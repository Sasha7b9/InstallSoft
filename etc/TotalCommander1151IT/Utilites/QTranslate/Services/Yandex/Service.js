function generateUUID(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}).replace(/-/g,"")}function serviceHeader(){return new ServiceHeader(11,"Yandex","Translate Russian, Spanish, German, French and a number of other languages to and from English. You can translate individual words, as well as whole texts and webpages."+Const.NL2+"https://translate.yandex.com/"+Const.NL2+"© 2011-2022 «Yandex»",Capability.TRANSLATE|Capability.DETECT_LANGUAGE|Capability.LISTEN)}function serviceHost(e,t,n){return e===Capability.LISTEN?"https://tts.voicetech.yandex.net":"https://translate.yandex.net"}function serviceLink(e,t,n){var a="https://translate.yandex.com";return e&&(t=isLanguage(t)?codeFromLanguage(t):"",n=isLanguage(n)?codeFromLanguage(n):"",a+=format("/?lang={0}-{1}&text={2}",t,n,encodeGetParam(e))),a}function YandexModel(e){e=prepareSource(e),e=limitSource(e,1e4),this._makeChunks(e)}function serviceDetectLanguageRequest(e){e=encodeGetParam(e.slice(0,256)),e=format("/api/v1/tr.json/detect?uuid={0}&srv=android&text={1}",YandexAppId1,e);var t=getHeader()+Const.NL+"Referer: "+serviceLink();return new RequestData(HttpMethod.GET,e,null,t)}function serviceDetectLanguageResponse(e){return(e=parseJSON(e))&&e.code&&200==e.code?languageFromCode(e.lang):UNKNOWN_LANGUAGE}var yandexModel;function serviceTranslateRequest(e,t,n){return yandexModel||(yandexModel=new YandexModel(e)),e=format("/api/v1/tr.json/translate?uuid={0}&srv=android&lang={1}-{2}&reason=auto&format=text&yu=2210680511641235828",YandexAppId1,codeFromLanguage(t),codeFromLanguage(n)),t="text="+encodePostParam(yandexModel.getNextChunk()),n=postHeader()+Const.NL+"Referer: "+serviceLink(),new RequestData(HttpMethod.POST,e,t,n,null,"serviceTranslateResponse")}function _useDictionary(e){return e&&100>=e.length&&!/[\n\r]/.test(e)&&3>=e.split(/\s+/).length}function serviceTranslateResponse(e,t,n,a){(t=parseJSON(t))&&t.code&&200==t.code&&(t=t.text.join("\n"));var r=null;return _useDictionary(e)?r="dictionaryRequest":yandexModel.hasChunks()&&(r="serviceTranslateRequest"),new ResponseData(t,n,a,null,r)}function dictionaryRequest(e,t,n){return e=format("/dicservice.json/lookup?srv=android&uuid={0}&text={1}&lang={2}-{3}",YandexAppId1,encodeGetParam(prepareSource(e)),codeFromLanguage(t),codeFromLanguage(n)),new RequestData(HttpMethod.GET,e,null,null,null,"dictionaryResponse")}function dictionaryResponse(e,t,n,a){var r,s;if(e=parseJSON(t),t="","object"==typeof e&&e.def)for(var o=0;o<e.def.length;o++){var u=e.def[o];if(u.tr){t+=Const.NL+u.text+(u.ts?" ["+u.ts+"]":"")+" "+u.tr[0].pos+Const.NL,s=u.tr.length;for(var i=0;i<s;i++){var c=u.tr[i];if(t+=(1<s?i+1+". ":"    ")+c.text,c.syn)for(r=0;r<c.syn.length;r++)t+=", "+c.syn[r].text;if(t+=Const.NL,c.mean&&(t+="    ("+c.mean.map(function(e){return e.text}).join(", ")+")"+Const.NL),c.ex)for(r=0;r<c.ex.length;r++){var d=c.ex[r];t+="        "+d.text+" - "+d.tr.map(function(e){return e.text}).join(", ")+Const.NL}}}}return t&&(t=Const.NL+t),new ResponseData(t,n,a)}function serviceListenRequest(e,t,n){switch(t=codeFromLanguage(t)){case"en":t="en_GB";break;case"sv":t="sv_SE";break;case"da":t="da_DK";break;case"cs":t="cs_CZ";break;case"ca":t="ca_ES";break;case"ar":t="ar_AE";break;default:t=t+"_"+t.toUpperCase()}return e=format("/tts?format=mp3&quality=hi&platform=web&application=translate&lang={0}&text={1}",t,encodeGetParam(e)),n&&(e+="&speed=0.7"),new RequestData(HttpMethod.GET,e)}YandexAppId1=generateUUID(),YandexModel.prototype.hasChunks=function(){return!!this._chunks.length},YandexModel.prototype.getNextChunk=function(){return this._chunks.shift()||""},YandexModel.prototype._makeChunks=function(e){var t;for(this._chunks=[];e&&(t=this._truncateText(e));)this._chunks.push(t),e=e.slice(t.length)},YandexModel.prototype._truncateText=function(e){var t=[/(\n+)/,/([.!?;\u0964](?:\s+|$))/,/([\-\u2012-\u2015](?:\s+|$))/,/([,:](?:\s+|$))/,/([\u3002\uff01\uff1f\uff1b\u2026])/,/([\uff0c\uff1a])/,/(\s+)/];if(!e||600>=e.length)return e;e=e.slice(0,600);for(var n=0;n<t.length;n++){var a=t[n];if(a.test(e))return stringSplit(e,a).slice(0,-1).join("")}return e},SupportedLanguages=[-1,-1,"af","az","sq","ar","hy","eu","be","bg","ca","zh","zh","hr","cs","da","nl","en","et","fi",-1,"fr","gl","de","el","ht","he","hi","hu","is","id","it","ga","ja","ka","ko","lv","lt","mk","ms","mt","no","fa","pl","pt","ro","ru","sr","sk","sl","es","sw","sv","th","tr","uk","ur","vi","cy","yi","eo",-1,"la","lo","kk","uz","si","tg","te","km","mn","kn","ta","mr","bn","tt"];